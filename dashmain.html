<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rural Lady Empowerment Dashboard</title>
        <link rel="stylesheet" href="/css/style.css">
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@600&display=swap" rel="stylesheet">  
    </head>
    <body>
        <div class="sidebar h-screen w-64 fixed left-0 top-0 bg-slate-900 border-r border-slate-800 flex flex-col z-40">
            <div class="sidebar-logo p-6">
                <div class="logo-text text-4xl md:text-5xl font-semibold px-4 py-2 border-4 rounded-xl border-pink-600 bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 text-white shadow-lg tracking-wider glow hover:glow-lg transition-all duration-300 transform hover:-translate-y-1" 
                     style="font-family: 'Playfair Display', serif; text-shadow: 0 0 10px rgba(167, 139, 250, 0.5);">
                    Empower<span class="text-yellow-300" style="font-family: 'Poppins', sans-serif;">Her</span>
                </div>
            </div>
            
            <ul class="sidebar-menu flex-1 px-4 py-6 space-y-2 overflow-y-auto">
                <li>
                    <a href="#" onclick="loadPage('dashboard.html')" 
                       class="flex items-center px-4 py-3 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800 hover:bg-opacity-50 transition-all duration-300 group border border-transparent hover:border-purple-500">
                        <span class="text-xl mr-3 group-hover:text-purple-400 transition-colors">ğŸ“Š</span>
                        <span class="font-medium">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="loadPage('learning.html')" 
                       class="flex items-center px-4 py-3 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800 hover:bg-opacity-50 transition-all duration-300 group border border-transparent hover:border-purple-500">
                        <span class="text-xl mr-3 group-hover:text-purple-400 transition-colors">ğŸ‘©â€ğŸ“</span>
                        <span class="font-medium">Learning</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="loadPage('resources.html')" 
                       class="flex items-center px-4 py-3 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800 hover:bg-opacity-50 transition-all duration-300 group border border-transparent hover:border-purple-500">
                        <span class="text-xl mr-3 group-hover:text-purple-400 transition-colors">ğŸ“</span>
                        <span class="font-medium">Resources</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="loadPage('community.html')" 
                       class="flex items-center px-4 py-3 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800 hover:bg-opacity-50 transition-all duration-300 group border border-transparent hover:border-purple-500">
                        <span class="text-xl mr-3 group-hover:text-purple-400 transition-colors">ğŸ‘¥</span>
                        <span class="font-medium">Community</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="loadPage('store-landing.html')" 
                       class="flex items-center px-4 py-3 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800 hover:bg-opacity-50 transition-all duration-300 group border border-transparent hover:border-purple-500">
                        <span class="text-xl mr-3 group-hover:text-purple-400 transition-colors">ğŸª</span>
                        <span class="font-medium">Store</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="loadPage('donate.html')" 
                       class="flex items-center px-4 py-3 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800 hover:bg-opacity-50 transition-all duration-300 group border border-transparent hover:border-purple-500">
                        <span class="text-xl mr-3 group-hover:text-purple-400 transition-colors">ğŸ’–</span>
                        <span class="font-medium">Donate</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="loadPage('settings.html')" 
                       class="flex items-center px-4 py-3 rounded-lg text-slate-300 hover:text-white hover:bg-slate-800 hover:bg-opacity-50 transition-all duration-300 group border border-transparent hover:border-purple-500">
                        <span class="text-xl mr-3 group-hover:text-purple-400 transition-colors">âš™ï¸</span>
                        <span class="font-medium">Settings</span>
                    </a>
                </li>
            </ul>
            
            <div class="sidebar-footer p-6">
                <a href="#" class="btn-secondary w-full text-center px-6 py-3 rounded-full font-medium transition-all hover:bg-purple-900 hover:bg-opacity-30 hover:border-purple-500 hover:text-white" 
                   onclick="logout()">Logout</a>
            </div>
        </div>
        
        <style>
            .glow {
                box-shadow: 0 0 15px rgba(167, 139, 250, 0.5);
            }
            
            .glow-lg {
                box-shadow: 0 0 25px rgba(167, 139, 250, 0.7);
            }
            
            .sidebar-menu a {
                backdrop-filter: blur(5px);
            }
            
            .sidebar-menu a:hover {
                background: rgba(15, 23, 42, 0.5);
            }
            
            .sidebar {
                background: linear-gradient(135deg, #020617 0%, #0f172a 100%);
            }
        </style>

        <div class="main-content">

            <!-- Loading Indicator (hidden by default) -->
            <div id="loading"
                class="absolute inset-0 flex items-center justify-center bg-white z-10 hidden">
            </div>

            <!-- The iframe that shows different sections -->
            <iframe id="contentFrame" src="dashboard.html"
                frameborder="0" style="width: 100%; height: 100%;"></iframe>
            
        </div>

        <script>
        // Update the profile photo and name in the dashboard
        document.addEventListener("DOMContentLoaded", () => {
            const profileName = localStorage.getItem("userName") || "Guest";
            const profilePhoto = localStorage.getItem("profilePhoto") || "default-avatar.png";

            document.getElementById("dashboardProfileName").textContent = profileName;
            document.getElementById("dashboardProfilePhoto").src = profilePhoto;
        });

        // Add event listener for logout
        function logout() {
            // Clear local storage and redirect to login
            localStorage.clear();
            window.location.href = "index.html";
        }
        window.addEventListener('DOMContentLoaded', () => {
    const storedPhoto = localStorage.getItem('profilePhoto');
    const storedName = localStorage.getItem('profileName');

    if (storedPhoto) {
      const img = document.getElementById('dashboardProfilePhoto');
      if (img) img.src = storedPhoto;
    }

    if (storedName) {
      const nameSpan = document.getElementById('dashboardProfileName');
      if (nameSpan) nameSpan.textContent = storedName;
    }
  });

  function loadPage(pageUrl) {
        const iframe = document.getElementById('contentFrame');
        const loading = document.getElementById('loading');

        // Show loading
        loading.classList.remove('hidden');

        // Optional: Clear previous iframe visually (black issue workaround)
        iframe.style.opacity = "0";

        // Change src to the new page
        iframe.src = pageUrl;

        // Wait for iframe to load, then hide loading and show content
        iframe.onload = () => {
            loading.classList.add('hidden');
            iframe.style.opacity = "1";
        };
    }

    </script>
    </body>
</html>
